## ----------------------------------------------------------------------- INFO
## [.ael/.network]
## author        = "fantomH @alterEGO Linux"
## created       = 2022-11-24 01:37:23 UTC
## updated       = 2023-08-04 02:31:36 UTC
## description   = "Network related functions"

[ -f ${HOME}/.ael/bash-ael/messages.bash ]                                  \
&& . ${HOME}/.ael/bash-ael/messages.bash


## -------------------- [ view-ips ]                                        {{{
## [view-ips()]
## version       = 2023-08-04 02:23:48 UTC
## description   = "Display IP addresses."
## packages      = ['coreutils', 'gawk', 'grep', 'procps-ng']

view_ips() {

    message action "< view_ips > from $(basename $BASH_SOURCE)"
    message action "Current IP address(es) ..."

    while read -r _interfaces; do
        spaces=30
        _interface=$(cut -f 1 <<<"${_interfaces}")
        _ip=$(cut -f 2 <<<"${_interfaces}")
        printf "%s%$((spaces - ${#_interface}))s%s\n" "$_interface" "$_ip"
    done <<< $(/usr/bin/ip address | grep "inet [1-9]" | awk '{ print $NF "\t" $2}')
  }
  alias view-ips="view_ips"
  ## }}}

## -------------------- [ whoisweb ]                                        {{{
## [whoisweb()]
## version       = 2023-10-20 09:45:58 UTC
## description   = Query WHOIS web if `whois` port 43 is blocked on your network.
## packages      = ['curl', 'jq', 'sed']

whoisweb() {

    message action "< whoisweb > from $(basename $BASH_SOURCE)"
    message action "Querying whois on the web for ${1} ..."

    curl --silent https://whoisjs.com/api/v1/${1}                             \
    | jq ".raw"                                                               \
    | sed "s/\\\r\\\n/\\n/g"
  }
  ## }}}

# vim: foldmethod=marker
## ------------------------------------------------------------- FIN ¯\_(ツ)_/¯
